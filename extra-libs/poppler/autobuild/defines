PKGNAME=poppler
PKGSEC=libs
PKGDES="A PDF rendering library and command line tools used to manipulate PDF files"
PKGDEP="cairo curl fontconfig gcc-runtime lcms2 libjpeg-turbo nss openjpeg \
        poppler-data"
BUILDDEP="vim gtk-doc gtk-3 poppler-data gobject-introspection \
          nss icu"

CMAKE_AFTER="-DENABLE_XPDF_HEADERS=ON \
             -DENABLE_GTK_DOC=OFF"
PKGBREAK="texlive<=20150521-6 libreoffice<=5.3.4.2 inkscape<=0.92.1-2 \
          cups-filters<=1.17.9 calligra<=3.0.1-1"

# Old GCC specs have some problem which prevents cmake from success.
# Check it here.
if ! grep -q 'cc1_options' /usr/lib/gcc/specs/hardened-ld; then
	BUILDDEP+=" llvm"
	USECLANG=1
fi

if [[ "${CROSS:-$ARCH}" != "riscv64" ]]; then
	BUILDDEP+=" qt-4 qt-5"
fi
