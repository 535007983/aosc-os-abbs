From bf0ca3f4d2bd0bfdae991f7a28ddd826ed5ef610 Mon Sep 17 00:00:00 2001
From: Andreas Baierl <ichgeh@imkreisrum.de>
Date: Fri, 3 Jan 2020 21:56:56 +0100
Subject: [PATCH 039/102] lima/parser: Fix VS cmd stream parser

prefetch is int, not bool.

Reviewed-by: Qiang Yu <yuq825@gmail.com>
Signed-off-by: Andreas Baierl <ichgeh@imkreisrum.de>
---
 src/gallium/drivers/lima/lima_parser.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/gallium/drivers/lima/lima_parser.c b/src/gallium/drivers/lima/lima_parser.c
index 8850a284a0d..f82ae0a2c2a 100644
--- a/src/gallium/drivers/lima/lima_parser.c
+++ b/src/gallium/drivers/lima/lima_parser.c
@@ -71,8 +71,8 @@ parse_vs_draw(FILE *fp, uint32_t *value1, uint32_t *value2)
 static void
 parse_vs_shader_info(FILE *fp, uint32_t *value1, uint32_t *value2)
 {
-   fprintf(fp, "\t/* SHADER_INFO: prefetch: %s, size: %d */\n",
-           (*value1 & 0x00100000) ? "enabled" : "disabled",
+   fprintf(fp, "\t/* SHADER_INFO: prefetch: %d, size: %d */\n",
+           (*value1 & 0xfff00000) >> 20,
            (((*value1 & 0x000fffff) >> 10) + 1) << 4);
 }
 
-- 
2.24.1

