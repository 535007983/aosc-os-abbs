From a22f105b5e970495439522e47e6df705fe3191b2 Mon Sep 17 00:00:00 2001
From: Icenowy Zheng <icenowy@aosc.io>
Date: Mon, 23 Oct 2017 13:17:14 +0800
Subject: [PATCH] support installation of TS mod

Signed-off-by: Icenowy Zheng <icenowy@aosc.io>
---
 Makefile                                         |  26 ++++++++++++++++++-----
 packaging/linux/hicolor/32x32/apps/openra-ts.png | Bin 0 -> 3396 bytes
 2 files changed, 21 insertions(+), 5 deletions(-)
 create mode 100644 packaging/linux/hicolor/32x32/apps/openra-ts.png

diff --git a/Makefile b/Makefile
index d6af126bb..b3fb2a6cf 100644
--- a/Makefile
+++ b/Makefile
@@ -374,6 +374,7 @@ install-default-mods:
 	@$(CP_R) mods/cnc "$(DATA_INSTALL_DIR)/mods/"
 	@$(CP_R) mods/ra "$(DATA_INSTALL_DIR)/mods/"
 	@$(CP_R) mods/d2k "$(DATA_INSTALL_DIR)/mods/"
+	@$(CP_R) mods/ts "$(DATA_INSTALL_DIR)/mods/"
 	@$(INSTALL_PROGRAM) $(mod_d2k_TARGET) "$(DATA_INSTALL_DIR)/mods/d2k"
 	@$(CP_R) mods/modcontent "$(DATA_INSTALL_DIR)/mods/"
 
@@ -392,7 +393,9 @@ install-linux-desktop:
 	@$(INSTALL_DATA) packaging/linux/openra-cnc.desktop "$(DESTDIR)$(datadir)/applications"
 	@sed 's/{MOD}/d2k/g' packaging/linux/openra.desktop.in | sed 's/{MODNAME}/Dune 2000/g' > packaging/linux/openra-d2k.desktop
 	@$(INSTALL_DATA) packaging/linux/openra-d2k.desktop "$(DESTDIR)$(datadir)/applications"
-	@-$(RM) packaging/linux/openra-ra.desktop packaging/linux/openra-cnc.desktop packaging/linux/openra-d2k.desktop
+	@sed 's/{MOD}/ts/g' packaging/linux/openra.desktop.in | sed 's/{MODNAME}/Tiberian Sun/g' > packaging/linux/openra-ts.desktop
+	@$(INSTALL_DATA) packaging/linux/openra-ts.desktop "$(DESTDIR)$(datadir)/applications"
+	@-$(RM) packaging/linux/openra-ra.desktop packaging/linux/openra-cnc.desktop packaging/linux/openra-d2k.desktop packaging/linux/openra-ts.desktop
 
 install-linux-mime:
 	@$(INSTALL_DIR) "$(DESTDIR)$(datadir)/mime/packages/"
@@ -407,7 +410,9 @@ install-linux-mime:
 	@$(INSTALL_DATA) packaging/linux/openra-cnc-join-servers.desktop "$(DESTDIR)$(datadir)/applications"
 	@sed 's/{MOD}/d2k/g' packaging/linux/openra-join-servers.desktop.in | sed 's/{MODNAME}/Dune 2000/g' | sed 's/{TAG}/$(VERSION)/g' > packaging/linux/openra-d2k-join-servers.desktop
 	@$(INSTALL_DATA) packaging/linux/openra-d2k-join-servers.desktop "$(DESTDIR)$(datadir)/applications"
-	@-$(RM) packaging/linux/openra-mimeinfo.xml packaging/linux/openra-ra-join-servers.desktop packaging/linux/openra-cnc-join-servers.desktop packaging/linux/openra-d2k-join-servers.desktop
+	@sed 's/{MOD}/ts/g' packaging/linux/openra-join-servers.desktop.in | sed 's/{MODNAME}/Tiberian Sun/g' | sed 's/{TAG}/$(VERSION)/g' > packaging/linux/openra-ts-join-servers.desktop
+	@$(INSTALL_DATA) packaging/linux/openra-ts-join-servers.desktop "$(DESTDIR)$(datadir)/applications"
+	@-$(RM) packaging/linux/openra-mimeinfo.xml packaging/linux/openra-ra-join-servers.desktop packaging/linux/openra-cnc-join-servers.desktop packaging/linux/openra-d2k-join-servers.desktop packaging/linux/openra-ts-join-servers.desktop
 
 install-linux-appdata:
 	@$(INSTALL_DIR) "$(DESTDIR)$(datadir)/appdata/"
@@ -417,7 +422,9 @@ install-linux-appdata:
 	@$(INSTALL_DATA) packaging/linux/openra-cnc.appdata.xml "$(DESTDIR)$(datadir)/appdata/"
 	@sed 's/{MOD}/d2k/g' packaging/linux/openra.appdata.xml.in | sed 's/{MOD_NAME}/Dune 2000/g' | sed 's/{SCREENSHOT_RA}//g' | sed 's/{SCREENSHOT_CNC}//g' | sed 's/{SCREENSHOT_D2K}/ type="default"/g'> packaging/linux/openra-d2k.appdata.xml
 	@$(INSTALL_DATA) packaging/linux/openra-d2k.appdata.xml "$(DESTDIR)$(datadir)/appdata/"
-	@-$(RM) packaging/linux/openra-ra.appdata.xml packaging/linux/openra-cnc.appdata.xml packaging/linux/openra-d2k.appdata.xml
+	@sed 's/{MOD}/ts/g' packaging/linux/openra.appdata.xml.in | sed 's/{MOD_NAME}/Tiberian Sun/g' | sed 's/{SCREENSHOT_RA}//g' | sed 's/{SCREENSHOT_CNC}//g' | sed 's/{SCREENSHOT_D2K}//g'> packaging/linux/openra-ts.appdata.xml
+	@$(INSTALL_DATA) packaging/linux/openra-ts.appdata.xml "$(DESTDIR)$(datadir)/appdata/"
+	@-$(RM) packaging/linux/openra-ra.appdata.xml packaging/linux/openra-cnc.appdata.xml packaging/linux/openra-d2k.appdata.xml packaging/linux/openra-ts.appdata.xml
 
 install-man-page: man-page
 	@$(INSTALL_DIR) "$(DESTDIR)$(mandir)/man6/"
@@ -435,22 +442,26 @@ endif
 	@sed 's/{MOD}/ra/g' packaging/linux/openra.debug.in | sed 's/{MODNAME}/Red Alert/g' > packaging/linux/openra-ra
 	@sed 's/{MOD}/cnc/g' packaging/linux/openra.debug.in | sed 's/{MODNAME}/Tiberian Dawn/g' > packaging/linux/openra-cnc
 	@sed 's/{MOD}/d2k/g' packaging/linux/openra.debug.in | sed 's/{MODNAME}/Dune 2000/g' > packaging/linux/openra-d2k
+	@sed 's/{MOD}/ts/g' packaging/linux/openra.debug.in | sed 's/{MODNAME}/Tiberian Sun/g' > packaging/linux/openra-ts
 
 	@$(INSTALL_DIR) "$(BIN_INSTALL_DIR)"
 	@$(INSTALL_PROGRAM) -m +rx packaging/linux/openra-ra "$(BIN_INSTALL_DIR)"
 	@$(INSTALL_PROGRAM) -m +rx packaging/linux/openra-cnc "$(BIN_INSTALL_DIR)"
 	@$(INSTALL_PROGRAM) -m +rx packaging/linux/openra-d2k "$(BIN_INSTALL_DIR)"
-	@-$(RM) packaging/linux/openra-ra packaging/linux/openra-cnc packaging/linux/openra-d2k packaging/linux/openra.debug.in
+	@$(INSTALL_PROGRAM) -m +rx packaging/linux/openra-ts "$(BIN_INSTALL_DIR)"
+	@-$(RM) packaging/linux/openra-ra packaging/linux/openra-cnc packaging/linux/openra-d2k packaging/linux/openra-ts packaging/linux/openra.debug.in
 
 	@sed 's/{MOD}/ra/g' packaging/linux/openra-server.debug.in | sed 's/{MODNAME}/Red Alert/g' > packaging/linux/openra-ra-server
 	@sed 's/{MOD}/cnc/g' packaging/linux/openra-server.debug.in | sed 's/{MODNAME}/Tiberian Dawn/g' > packaging/linux/openra-cnc-server
 	@sed 's/{MOD}/d2k/g' packaging/linux/openra-server.debug.in | sed 's/{MODNAME}/Dune 2000/g' > packaging/linux/openra-d2k-server
+	@sed 's/{MOD}/ts/g' packaging/linux/openra-server.debug.in | sed 's/{MODNAME}/Tiberian Sun/g' > packaging/linux/openra-ts-server
 
 	@$(INSTALL_DIR) "$(BIN_INSTALL_DIR)"
 	@$(INSTALL_PROGRAM) -m +rx packaging/linux/openra-ra-server "$(BIN_INSTALL_DIR)"
 	@$(INSTALL_PROGRAM) -m +rx packaging/linux/openra-cnc-server "$(BIN_INSTALL_DIR)"
 	@$(INSTALL_PROGRAM) -m +rx packaging/linux/openra-d2k-server "$(BIN_INSTALL_DIR)"
-	@-$(RM) packaging/linux/openra-ra-server packaging/linux/openra-cnc-server packaging/linux/openra-d2k-server packaging/linux/openra-server.debug.in
+	@$(INSTALL_PROGRAM) -m +rx packaging/linux/openra-ts-server "$(BIN_INSTALL_DIR)"
+	@-$(RM) packaging/linux/openra-ra-server packaging/linux/openra-cnc-server packaging/linux/openra-d2k-server packaging/linux/openra-ts-server packaging/linux/openra-server.debug.in
 
 uninstall:
 	@-$(RM_R) "$(DATA_INSTALL_DIR)"
@@ -460,12 +471,16 @@ uninstall:
 	@-$(RM_F) "$(BIN_INSTALL_DIR)/openra-cnc-server"
 	@-$(RM_F) "$(BIN_INSTALL_DIR)/openra-d2k"
 	@-$(RM_F) "$(BIN_INSTALL_DIR)/openra-d2k-server"
+	@-$(RM_F) "$(BIN_INSTALL_DIR)/openra-ts"
+	@-$(RM_F) "$(BIN_INSTALL_DIR)/openra-ts-server"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/applications/openra-ra.desktop"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/applications/openra-cnc.desktop"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/applications/openra-d2k.desktop"
+	@-$(RM_F) "$(DESTDIR)$(datadir)/applications/openra-ts.desktop"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/applications/openra-ra-join-servers.desktop"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/applications/openra-cnc-join-servers.desktop"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/applications/openra-d2k-join-servers.desktop"
+	@-$(RM_F) "$(DESTDIR)$(datadir)/applications/openra-ts-join-servers.desktop"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/icons/hicolor/16x16/apps/openra-ra.png"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/icons/hicolor/32x32/apps/openra-ra.png"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/icons/hicolor/48x48/apps/openra-ra.png"
@@ -481,6 +496,7 @@ uninstall:
 	@-$(RM_F) "$(DESTDIR)$(datadir)/icons/hicolor/48x48/apps/openra-d2k.png"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/icons/hicolor/64x64/apps/openra-d2k.png"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/icons/hicolor/128x128/apps/openra-d2k.png"
+	@-$(RM_F) "$(DESTDIR)$(datadir)/icons/hicolor/32x32/apps/openra-ts.png"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/mime/packages/openra.xml"
 	@-$(RM_F) "$(DESTDIR)$(datadir)/appdata/openra.appdata.xml"
 	@-$(RM_F) "$(DESTDIR)$(mandir)/man6/openra.6"
diff --git a/packaging/linux/hicolor/32x32/apps/openra-ts.png b/packaging/linux/hicolor/32x32/apps/openra-ts.png
new file mode 100644
index 0000000000000000000000000000000000000000..a82496dac351e553f28c695abdd91c8a154f6c8e
GIT binary patch
literal 3396
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

literal 0
HcmV?d00001

-- 
2.13.6

