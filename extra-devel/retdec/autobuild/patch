if ! git submodule update --init --recursive --depth=1; then
    exit 1
fi

echo -e "[\e[96mINFO\e[0m]: Fetch submodules done."
for i in autobuild/patches/*; do
    echo "[\e[96mINFO\e[0m]: Applying ${i}..."
    if ! patch -Np1 -i "${i}"; then
        echo -e "[\e[31mERROR\e[0m]: Patch failed" && exit 1
    fi
done
