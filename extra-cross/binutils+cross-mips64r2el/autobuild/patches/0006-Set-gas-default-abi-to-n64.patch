From 1f2e5ae40ff172f0a193c1fb4f0c5fcabe25b53f Mon Sep 17 00:00:00 2001
From: Chenghua Xu <xuchenghua@loongson.cn>
Date: Thu, 7 Dec 2017 10:13:16 +0800
Subject: [PATCH 8/9] Set gas default abi to n64

---
 gas/configure                   | 2 +-
 ld/testsuite/config/default.exp | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/gas/configure b/gas/configure
index e6e985e714..c5c736d7fb 100755
--- a/gas/configure
+++ b/gas/configure
@@ -12382,7 +12382,7 @@ _ACEOF
 	# Decide which ABI to target by default.
 	case ${target} in
 	  mips64*-linux* | mips-sgi-irix6* | mips64*-freebsd* | mips64*-kfreebsd*-gnu)
-	    mips_default_abi=N32_ABI
+	    mips_default_abi=N64_ABI
 	    ;;
 	  mips*-linux* | mips*-freebsd* | mips*-kfreebsd*-gnu)
 	    mips_default_abi=O32_ABI
diff --git a/ld/testsuite/config/default.exp b/ld/testsuite/config/default.exp
index f5cb188478..a9eb383881 100644
--- a/ld/testsuite/config/default.exp
+++ b/ld/testsuite/config/default.exp
@@ -103,7 +103,7 @@ if {[istarget mips64*-*-linux*] &&
     (![board_info [target_info name] exists multilib_flags] ||
      ![string match "*-mabi" [board_info [target_info name] multilib_flags]])
    } {
-    append gcc_B_opt " -mabi=n32"
+    append gcc_B_opt " -mabi=64"
 }
 
 if { [istarget rx-*-*] } {
-- 
2.15.1

