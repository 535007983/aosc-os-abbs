#!/bin/bash
VER="34.0.2036.25"

cd $(mktemp -d)

wget http://get.geo.opera.com/pub/opera/desktop/${VER}/linux/opera-stable_${VER}_amd64.deb
mkdir opera-stable
bsdtar xf opera-stable_${VER}_amd64.deb
bsdtar xf data.tar.xz -C opera-stable

cp -a opera-stable/usr/bin/opera /usr/bin/
cp -a opera-stable/usr/lib/x86_64-linux-gnu/ /usr/lib/
cp -a opera-stable/usr/share/applications/opera.desktop /usr/share/applications/
cp -a opera-stable/usr/share/doc/opera-stable/ /usr/share/doc/
cp -a opera-stable/usr/share/pixmaps/opera.xpm /usr/share/pixmaps/

for i in 128 16 256 32 48
do
  cp -a opera-stable/usr/share/icons/hicolor/${i}x${i}/apps/opera.png /usr/share/icons/hicolor/${i}x${i}/apps/
done

chown root:root /usr/lib/x86_64-linux-gnu/opera/opera_sandbox
chmod 4755 /usr/lib/x86_64-linux-gnu/opera/opera_sandbox

rm -rf $(mktemp -d)
