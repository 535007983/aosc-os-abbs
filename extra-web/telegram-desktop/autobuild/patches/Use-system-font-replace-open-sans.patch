From 727c1bea3a9d6b4d340570f23978f6fa3b085e45 Mon Sep 17 00:00:00 2001
From: eatradish <sakiiily@aosc.xyz>
Date: Sat, 2 May 2020 18:35:00 -0500
Subject: [PATCH] Use system font replace Open Sans

---
 Telegram/lib_ui/ui/style/style_core_font.cpp | 13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)

diff --git a/Telegram/lib_ui/ui/style/style_core_font.cpp b/Telegram/lib_ui/ui/style/style_core_font.cpp
index aacd7e2..f493528 100644
--- a/Telegram/lib_ui/ui/style/style_core_font.cpp
+++ b/Telegram/lib_ui/ui/style/style_core_font.cpp
@@ -233,10 +233,17 @@ QString GetPossibleEmptyOverride(int32 flags) {
        return QString();
 }

+QString GeneralFont() {
+       static const auto family = [&]() -> QString {
+               const auto type = QFontDatabase::GeneralFont;
+               return QFontDatabase::systemFont(type).family();
+       }();
+
+       return family;
+}
+
 QString GetFontOverride(int32 flags) {
-       const auto familyName = (flags & FontSemibold)
-               ? "Open Sans Semibold"
-               : "Open Sans";
+       const auto familyName = GeneralFont();

        const auto result = GetPossibleEmptyOverride(flags);
        return result.isEmpty() ? familyName : result;
--
2.24.3

