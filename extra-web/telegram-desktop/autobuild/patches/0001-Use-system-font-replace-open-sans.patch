From b1750d6b341787d4fa672f377bce75eb50bd82a5 Mon Sep 17 00:00:00 2001
From: eatradish <sakiiily@aosc.io>
Date: Wed, 6 May 2020 16:24:52 -0500
Subject: [PATCH] Use system font replace Open Sans

---
 Telegram/lib_ui/ui/style/style_core_font.cpp | 13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)

diff --git a/Telegram/lib_ui/ui/style/style_core_font.cpp b/Telegram/lib_ui/ui/style/style_core_font.cpp
index be43a2b..1b7d17d 100644
--- a/Telegram/lib_ui/ui/style/style_core_font.cpp
+++ b/Telegram/lib_ui/ui/style/style_core_font.cpp
@@ -250,10 +250,17 @@ QString GetPossibleEmptyOverride(int32 flags) {
        return QString();
 }

+QString GeneralFont() {
+       static const auto family = [&]() -> QString {
+               const auto type = QFontDatabase::GeneralFont;
+               return QFontDatabase::systemFont(type).family();
+       }();
+
+       return family;
+}
+
 QString GetFontOverride(int32 flags) {
-       const auto familyName = (flags & FontSemibold)
-               ? "Open Sans Semibold"
-               : "Open Sans";
+       const auto familyName = GeneralFont();

        const auto result = GetPossibleEmptyOverride(flags);
        return result.isEmpty() ? familyName : result;
--
2.26.2

