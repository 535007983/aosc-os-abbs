diff -ur xrdp-0.9.1/instfiles/xrdp.service xrdp-0.9.1.service/instfiles/xrdp.service
--- xrdp-0.9.1/instfiles/xrdp.service	2016-12-22 09:02:47.000000000 -0800
+++ xrdp-0.9.1.service/instfiles/xrdp.service	2017-01-19 23:35:06.000000000 -0800
@@ -1,15 +1,11 @@
 Description=xrdp daemon
 Documentation=man:xrdp(8) man:xrdp.ini(5)
 Requires=xrdp-sesman.service
-After=network.target xrdp-sesman.service
+After=xrdp-sesman.service
 
 [Service]
-Type=forking
-PIDFile=/var/run/xrdp.pid
-EnvironmentFile=-/etc/sysconfig/xrdp
-EnvironmentFile=-/etc/default/xrdp
-ExecStart=/usr/local/sbin/xrdp $XRDP_OPTIONS
-ExecStop=/usr/local/sbin/xrdp $XRDP_OPTIONS --kill
+EnvironmentFile=/etc/sysconfig/xrdp
+ExecStart=/usr/sbin/xrdp $XRDP_OPTIONS --nodaemon
 
 [Install]
 WantedBy=multi-user.target
diff -ur xrdp-0.9.1/instfiles/xrdp-sesman.service xrdp-0.9.1.service/instfiles/xrdp-sesman.service
--- xrdp-0.9.1/instfiles/xrdp-sesman.service	2016-12-22 09:02:47.000000000 -0800
+++ xrdp-0.9.1.service/instfiles/xrdp-sesman.service	2017-01-22 11:39:23.000000000 -0800
@@ -2,16 +2,13 @@
 Description=xrdp session manager
 Documentation=man:xrdp-sesman(8) man:sesman.ini(5)
-After=network.target
+Wants=network-online.target nss-lookup.target nss-user-lookup.target
+After=network-online.target nss-lookup.target nss-user-lookup.target
 StopWhenUnneeded=true
 BindsTo=xrdp.service
 
 [Service]
-Type=forking
-PIDFile=/var/run/xrdp-sesman.pid
-EnvironmentFile=-/etc/sysconfig/xrdp
-EnvironmentFile=-/etc/default/xrdp
-ExecStart=/usr/local/sbin/xrdp-sesman $SESMAN_OPTIONS
-ExecStop=/usr/local/sbin/xrdp-sesman $SESMAN_OPTIONS --kill
+EnvironmentFile=/etc/sysconfig/xrdp
+ExecStart=/usr/sbin/xrdp-sesman $SESMAN_OPTIONS --nodaemon
 
 [Install]
 WantedBy=multi-user.target
