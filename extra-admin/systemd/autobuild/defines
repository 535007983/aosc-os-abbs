PKGNAME=systemd
PKGSEC=admin
PKGDEP="glib lz4 xz acl bash cryptsetup curl elfutils gnutls kbd kmod libcap \
        libidn libmicrohttpd libseccomp linux-pam util-linux libgcrypt hwdata \
        libgpg-error iptables libxkbcommon qrencode"
BUILDDEP="gperf intltool docbook-xsl lxml gobject-introspection"
if [[ "${CROSS:-$ARCH}" = *64 ]]; then
    BUILDDEP+=" gnu-efi trousers"
fi
PKGDES="System and service manager"

# MicroHTTPD is needed for remote journal.
AUTOTOOLS_AFTER="--localstatedir=/var \
                 --enable-compat-libs \
                 --enable-xz \
                 --enable-lz4 \
                 --enable-hwdb \
                 --disable-gtk-doc \
                 --disable-audit \
                 --disable-ima \
                 --disable-kdbus \
                 --disable-terminal \
                 --enable-qrencode \
                 --enable-libcryptsetup \
                 --enable-seccomp \
                 --enable-microhttpd \
                 --enable-firstboot \
                 --enable-libidn \
                 --disable-kdbus \
                 --enable-ldconfig \
                 --enable-elfutils \
                 --enable-xkbcommon \
                 --enable-libcurl \
                 --enable-gnutls \
                 --with-sysvinit-path= \
                 --with-sysvrcnd-path="
if [[ "${CROSS:-$ARCH}" = *64 ]]; then
    AUTOTOOLS_AFTER+=" --enable-gnuefi \
                       --enable-tpm"
fi

NOLTO=no

PKGBREAK="systemd-sysv<=1"
PKGREP="systemd-sysv<=1"

# armel version sync.
PKGEPOCH=1
